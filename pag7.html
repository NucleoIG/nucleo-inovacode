<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>InovaCode</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="admin.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<div class="overlay"></div>

<header class="topo">
  <h1><i class="fas fa-user-shield"></i> Publica칞칚o de Not칤cias</h1>
</header>

<main class="container">

  <!-- CARD PUBLICAR NOT칈CIA -->
  <section class="card noticias">
    <h2><i class="fas fa-newspaper"></i> Publicar Not칤cia</h2>
    <input type="text" id="titulo" placeholder="T칤tulo da not칤cia">
    <input type="text" id="imagem" placeholder="URL da imagem (opcional)">
    <textarea id="texto" placeholder="Texto da not칤cia"></textarea>
    <button onclick="publicarNoticia()">游닉 Publicar</button>
  </section>

  <!-- LISTA DE NOT칈CIAS -->
  <section class="card lista">
    <h2><i class="fas fa-list"></i> Not칤cias Publicadas</h2>
    <div id="listaNoticias"></div>
  </section>

</main>

<script src="admin.js"></script>
<script>
    function publicarNoticia() {
  const titulo = document.getElementById("titulo").value.trim();
  const imagem = document.getElementById("imagem").value.trim();
  const texto = document.getElementById("texto").value.trim();

  if (!titulo || !texto) {
    alert("Preencha todos os campos!");
    return;
  }

  const noticia = { titulo, imagem, texto };
  let noticias = JSON.parse(localStorage.getItem("noticias")) || [];
  noticias.push(noticia);
  localStorage.setItem("noticias", JSON.stringify(noticias));

  alert("Not칤cia publicada com sucesso!");
  document.getElementById("titulo").value = "";
  document.getElementById("imagem").value = "";
  document.getElementById("texto").value = "";

  mostrarNoticias(); // Atualiza a lista
}

// Mostrar not칤cias na p치gina administrativa com bot칚o excluir
function mostrarNoticias() {
  const lista = document.getElementById("listaNoticias");
  if (!lista) return;

  let noticias = JSON.parse(localStorage.getItem("noticias")) || [];
  lista.innerHTML = ""; // limpa lista antes de preencher

  noticias.forEach((n, index) => {
    const div = document.createElement("div");
    div.className = "noticia card neon";

    div.innerHTML = `
      <img src="${n.imagem || 'https://via.placeholder.com/300'}" alt="Not칤cia">
      <h3>${n.titulo}</h3>
      <p>${n.texto}</p>
    `;

    // Bot칚o excluir apenas na 치rea administrativa
    const btnExcluir = document.createElement("button");
    btnExcluir.className = "excluir";
    btnExcluir.textContent = "游딈 Excluir";
    btnExcluir.addEventListener("click", () => {
      noticias.splice(index, 1); // remove do array
      localStorage.setItem("noticias", JSON.stringify(noticias));
      mostrarNoticias(); // atualiza a lista
    });

    div.appendChild(btnExcluir);
    lista.appendChild(div);
  });
}

// Carrega not칤cias automaticamente ao abrir a p치gina
document.addEventListener("DOMContentLoaded", mostrarNoticias);

</script>
</body>
</html>